<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title th:text="${categoria.nombre} + ' J' + ${numeroJornada} + ' en ' + ${nombreCompeticion}">Nacional Online 2020</title>
    <th:block th:include="fragments/head :: genericHead"></th:block>
    <th:block th:include="fragments/head :: datatablesHead"></th:block>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600&display=swap" rel="stylesheet"/>
    <script type="text/javascript" src="/js/ScrollUtils.js"></script>

</head>

<script th:inline="javascript">
    $(document).ready(function () {


        var tabla = $('#rankingJornada');
        if (tabla) {
            initializeForParticipante(tabla, [[${categoria.numTiempos}]], [[${categoria.nombre}]]);
        }
        scrollAFila();
    });


    /* CAMBIAR URL MANTENIENDO ANCHORS */

    function navigateCategoryWithAnchor(a) {
        if($(a).attr("data-desiredCategory")) {
            window.location.href = window.location.href.replace(/\/[^\/]*\/jornada/, '/' + $(a).attr("data-desiredCategory") + '/jornada');
        }
    }

    function changeJornada(a) {
        if($(a).attr("data-desiredJornada")) {
            window.location.href = window.location.href.replace('jornada/' + [[${numeroJornada}]], 'jornada/' + ([[${numeroJornada}]] + parseInt($(a).attr("data-desiredJornada"))));
        }
    }

    function navigateToGeneral(n) {
        window.location.href = window.location.href.replace('jornada/' + [[${numeroJornada}]], '');
    }


</script>

<body class="cubosbg">
<div th:replace="fragments/backButton :: backButton"/>
<div class="vertical-flex-wrapper">
    <div class="whitePanel" style="margin-top: 15px;">
        <div style="display: flex; align-items: center; justify-content: center;">
            <div class="bouncyContainer backward" th:classappend="${categoria.orden <=1  ? 'quieto':' '}">
                <a th:data-desiredCategory="${categoria.orden > 1 ? categorias.get(categoria.orden -1 - 1).nombre : ''}"
                   th:onclick="'navigateCategoryWithAnchor(this)'" class="bouncyContainer">
                    <img class="bouncyButton backward" th:classappend="${categoria.orden <=1  ? 'quieto':' '}" src="/img/backbutton.png"/>
                </a>
            </div>
            <h1><span th:text="${nombreCategoria}">ATRIBUTO_CATEGORIA_NO_ENCONTRADO</span></h1>
            <div class="bouncyContainer forward" th:classappend="${categoria.orden >= categorias.size()  ? 'quieto':' '}">
                <a th:data-desiredCategory="${categoria.orden < categorias.size() ? categorias.get(categoria.orden -1 + 1).nombre : ''}"
                   th:onclick="'navigateCategoryWithAnchor(this)'" class="bouncyContainer">
                    <img class="bouncyButton forward"  th:classappend="${categoria.orden >= categorias.size()  ? 'quieto':' '}" src="/img/forwardbutton.png"/>
                </a>
            </div>
        </div>
        <h1 style="text-align: center">
            en <br />
            <a th:href="${'/competicion/'+ nombreCompeticion}"><span th:text="${nombreCompeticion}"/></a>
        </h1>
    </div>
    <div class="whitePanel" style="margin-top: 15px;">
        <div style="display: flex; align-items: center;">
            <div class="bouncyContainer backward"  th:classappend="${numeroJornada <=1  ? 'quieto':' '}">
                <a th:onclick="'changeJornada(this)'" th:data-desiredJornada="${numeroJornada > 1} ? -1 : ''" class="bouncyContainer" style="cursor: pointer">
                    <img class="bouncyButton backward" th:classappend="${numeroJornada <=1  ? 'quieto':' '}" src="/img/backbutton.png"/>
                </a>
            </div>
            <h2><span th:text="'Jornada '+ ${numeroJornada}">ATRIBUTO_CATEGORIA_NO_ENCONTRADO</span></h2>
            <div  class="bouncyContainer forward" th:classappend="${numeroJornada >= numJornadas  ? 'quieto':' '}">
                <a th:onclick="'changeJornada(this)'"  th:data-desiredJornada="${numeroJornada < numJornadas} ? 1 : ''" class="bouncyContainer">
                    <img class="bouncyButton forward" th:classappend="${numeroJornada >= numJornadas  ? 'quieto':' '}" src="/img/forwardbutton.png"/>
                </a>
            </div>
        </div>
        <div style="display: flex; align-items: center; justify-content: center">

            <div class="bouncyContainer podio" style="width: 50px; height: 50px; min-width: 50px;">
                <a th:onclick="'navigateToGeneral()'" class="bouncyContainer">
                    <img class="bouncyButton podio" src="/img/podiologo.png"/>
                </a>
            </div>

            <h3> <a th:onclick="'navigateToGeneral()'" class="bouncyContainer">Ir al r치nking general</a></h3>
        </div>
    </div>

    <div class="whitePanel"
         style="margin-top: 15px; margin-left: 250px; margin-right: 250px; margin-bottom: 50px; z-index: 2; background-color: rgba(255,255,255,0.91)">
        <table id="rankingJornada" class="table centerCols">
            <thead>
            <tr>
                <th>Posici칩n</th>
                <th>Participante</th>
                <th>Tiempo 1</th>
                <th>Tiempo 2</th>
                <th>Tiempo 3</th>
                <th>Tiempo 4</th>
                <th>Tiempo 5</th>
                <th>Single</th>
                <th>Media</th>
                <th>Soluci칩n</th>
                <th>Explicaci칩n</th>
                <th>Puntos Jornada</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="tiempo: ${resultado}" th:id="${tiempo.nombreParticipante}">
                <td style="font-weight: bold" th:text="${tiempo.posicion}"></td>
                <td><a th:text="${tiempo.nombreParticipante}"
                       th:href="'/participante/'+${tiempo.nombreParticipante}+'/' + ${nombreCompeticion} + '#' + ${nombreCategoria}"></a></td>
                <td class="borderLeftColumn" th:text="${tiempo.tiempo1}"></td>
                <td th:text="${tiempo.tiempo2}"></td>
                <td th:text="${tiempo.tiempo3}"></td>
                <td th:text="${tiempo.tiempo4}"></td>
                <td th:text="${tiempo.tiempo5}"></td>
                <td style="font-weight: bold;" class="borderLeftColumn" th:text="${tiempo.single}"></td>
                <td style="font-weight: bold" th:text="${tiempo.media}"></td>
                <td th:text="${tiempo.solucion}"></td>
                <td th:text="${tiempo.explicacion}"></td>
                <td style="font-weight: bold" th:text="${tiempo.puntos}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>